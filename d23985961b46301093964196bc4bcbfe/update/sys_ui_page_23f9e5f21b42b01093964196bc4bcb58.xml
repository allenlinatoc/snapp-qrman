<?xml version="1.0" encoding="UTF-8"?><record_update table="sys_ui_page">
    <sys_ui_page action="INSERT_OR_UPDATE">
        <category>general</category>
        <client_script><![CDATA[function getParameterByName(name, url) {
	if (!url) {
		url = window.location.href;
	}
    name = name.replace(/[\[\]]/g, '\\$&');
    var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, ' '));
}

(function($) {
	
	$('head').append('<link type="text/css" rel="stylesheet" href="/sys_attachment.do?sys_id=47d0034f1b82f01093964196bc4bcb6b">');

	$(document).ready(function() {
		var params = {
			table: getParameterByName('table'),
			query: getParameterByName('query'),
			fieldname: getParameterByName('fieldname')
		};
		
		// Query QR printout data
		var ga = new GlideAjax("x_650610_qrman.UIPage_PrintView");
		ga.addParam("sysparm_name", "dataForA6");
		ga.addParam("sysparm_table", params.table);
		ga.addParam("sysparm_query", params.query);
		ga.getXMLAnswer(function(answer) {
			if (!answer) {
				alert("Error: Something went wrong, please try again.");
				return;
			}
			
			answer = JSON.parse(answer);
			console.log(answer);
			if (answer.data) {
				var $printarea = false;
				var $container = false;
				for (var i=0; i < answer.data.length; i++) {
					var row = answer.data[i];
					
					if (i % 12 == 0) {
						$printarea = $('<div>', {
							"class": "printarea"
						});
					}
					$container = $('<qr-container>');
					var $label1 = $('<div>', { "class": "qr-label" });
					$label1.text(row.extra_data.top);
					
					var $img = $('<img>', {
						"class": 'qr-img',
						src: row.qr_attachment.url
					});
					
					var $label2 = $('<div>', { "class": "qr-label" });
					$label2.text(row.extra_data.bottom);
					
					$container.append($label1);
					$container.append($img);
					$container.append($label2);
					$printarea.append($container);
					
					// Output printarea if it's full of QR Containers, or if it's the last QR Container
					if ( (i+1) % 12 == 0 || i+1 == answer.data.length) {
						$("body").append($printarea);
					}
				}
			}
		});
		
	});
	
	
})(jQuery.noConflict());]]></client_script>
        <description/>
        <direct>false</direct>
        <endpoint>x_650610_qrman_print-view-a6.do</endpoint>
        <html><![CDATA[<!-- <html>
	<head>
		<style>
			.printarea {
				border: 2px dotted #000;
				width: 364px;
				height: 532px;
				box-sizing: border-box;
				margin-bottom: 20px;
			}
			
			qr-container {
				display: inline-block;
				width: 120px;
				height: 133px;
				border: 2px dotted #000;
				box-sizing: border-box;
				text-align: center;
			}
			
			.qr-container .qr-img {
				width: 80%;
				height: auto;
			}
			
			.qr-container .qr-label {
				font-family: consolas;
				font-size: 8px;
			}
		</style>
	</head>
	
	<body>
		
	<div class="printarea">

		<qr-container>
			<div class="qr-label">Longsleeve Bodysuits</div>
			<img src="/sys_attachment.do?sys_id=554e64761b8e701093964196bc4bcbaf&amp;sysparm_this_url=x_650610_qrman_qr_code.do?sys_id=f04e64761b8e701093964196bc4bcbad&amp;sysparm_record_list=generated_byDYNAMIC90d1921e5f510100a9ad2572f2b477fe&amp;sysparm_record_row=1&amp;sysparm_record_rows=1&amp;sysparm_record_target=x_650610_qrman_qr_code" class="qr-img" />
			<div class="qr-label">(24M) Light Blue Dinosaur</div>
		</qr-container>

	</div>

	</body>
													   
</html> -->]]></html>
        <name>print-view-a6</name>
        <processing_script/>
        <sys_class_name>sys_ui_page</sys_class_name>
        <sys_created_by>allen.linatoc</sys_created_by>
        <sys_created_on>2021-08-22 06:24:01</sys_created_on>
        <sys_id>23f9e5f21b42b01093964196bc4bcb58</sys_id>
        <sys_mod_count>51</sys_mod_count>
        <sys_name>print-view-a6</sys_name>
        <sys_package display_value="QRMan" source="x_650610_qrman">d23985961b46301093964196bc4bcbfe</sys_package>
        <sys_policy/>
        <sys_scope display_value="QRMan">d23985961b46301093964196bc4bcbfe</sys_scope>
        <sys_update_name>sys_ui_page_23f9e5f21b42b01093964196bc4bcb58</sys_update_name>
        <sys_updated_by>allen.linatoc</sys_updated_by>
        <sys_updated_on>2021-08-23 07:25:50</sys_updated_on>
    </sys_ui_page>
</record_update>
